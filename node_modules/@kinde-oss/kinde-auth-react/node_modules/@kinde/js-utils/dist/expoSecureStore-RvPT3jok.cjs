"use strict";var g=Object.create;var c=Object.defineProperty;var S=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var l=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var w=(s,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of y(e))!u.call(s,n)&&n!==t&&c(s,n,{get:()=>e[n],enumerable:!(r=S(e,n))||r.enumerable});return s};var m=(s,e,t)=>(t=s!=null?g(l(s)):{},w(e||!s||!s.__esModule?c(t,"default",{value:s,enumerable:!0}):t,s));Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const o=require("./main-CfCjHvFs.cjs");let i;async function a(){let s=0;for(;!i&&s<20;)await new Promise(e=>setTimeout(e,100)),s++}class $ extends o.SessionBase{constructor(){super(),this.loadExpoStore()}async loadExpoStore(){try{i=await import("expo-secure-store")}catch(e){console.error("Error loading dependency expo storage:",e)}}async destroySession(){Object.values(o.StorageKeys).forEach(async t=>{await this.removeSessionItem(t)})}async setSessionItem(e,t){if(await a(),await this.removeSessionItem(e),typeof t=="string"){o.splitString(t,Math.min(o.storageSettings.maxLength,2048)).forEach(async(r,n)=>{await i.setItemAsync(`${o.storageSettings.keyPrefix}${e}${n}`,r)});return}else throw new Error("Item value must be a string")}async getSessionItem(e){await a();const t=[];let r=0,n=await i.getItemAsync(`${o.storageSettings.keyPrefix}${String(e)}${r}`);for(;n;)t.push(n),r++,n=await i.getItemAsync(`${o.storageSettings.keyPrefix}${String(e)}${r}`);return t.join("")||null}async removeSessionItem(e){await a();let t=0,r=await i.getItemAsync(`${o.storageSettings.keyPrefix}${String(e)}${t}`);for(;r;)await i.deleteItemAsync(`${o.storageSettings.keyPrefix}${String(e)}${t}`),t++,r=await i.getItemAsync(`${o.storageSettings.keyPrefix}${String(e)}${t}`)}}exports.ExpoSecureStore=$;
